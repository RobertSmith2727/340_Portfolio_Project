<body>
     
{{!-- Created aircraft table --}}
    <table id="passengersOnFlights-table">
        <h2>Passengers On Flights</h2>
        {{!-- Header section --}}
        <thead>

            
            <tr>
                
                <th>Flight Number</th>
                <th>Passenger</th>
                <th>Seat Number</th>
                <th><button onclick= "document.getElementById('addPassengersOnFlightsDiv').style.display='block'">Add</button></th>
                <th></th>
            </tr>
        </thead>

        {{!-- Body section --}}
        <tbody>

            {{#each data}}
            <tr data-value={{this.idPassenger}}>
                <td>{{this.flightNumber}}</td>
                <td value="{{this.idPassenger}}">{{this.idPassenger}}</td>
                <td>{{this.passengerSeatNumber}}</td>
                <td><button onclick="fillForm('{{this.flightNumber}}','{{this.idPassenger}}', '{{this.passengerSeatNumber}}')">Edit</button></td>
                <td><button onclick="deleteConfirm('{{this.idPassenger}}', '{{this.flightNumber}}')">Delete</button></td>
            </tr>
            {{/each}}
            
        </tbody>
    </table>

    {{!-- confirm delete function
    sourced from https://www.geeksforgeeks.org/javascript-window-confirm-method/ --}}
    <script>
        function deleteConfirm(passenger, flight) {
            var result = confirm('Are you sure you want to delete Passenger'+ passenger + 'on Flight'+ flight +'?');
            if (result == true) {
                deletePassengersOnFlights(flight,passenger);
            } else {
                window.location.reload();
            } 
        }
    </script>
    <script src='./js/delete_passengersOnFlights.js'></script>

    {{!-- Add Form --}}
    <div id='addPassengersOnFlightsDiv' style='display:none'>
    <legend>Add Passenger On Flight</legend>
    <form id='addPassengersOnFlightsForm' action='/addPassengersOnFlightsForm' method='POST'>

        Flight: <select name="flightInput" id="flightInput" required>
            <option value="" disabled selected="">Select Flight</option>
            {{#each flights}}
            <option value="{{this.flightNumber}}">{{this.flightNumber}}</option>
            {{/each}}
            </select>
        
        Passenger: <select name="idPassengerInput" id="idPassengerInput" required>
        <option value="" disabled selected="">Select Passenger</option>
        {{#each passengers}}
        <option value="{{this.idPassenger}}">{{this.name}}</option>
        {{/each}}
            </select>
        
        <label for="seatNumberInput">Seat Number</label>
        <input type="text" id="seatNumberInput" name="seatNumberInput" required>
        <input id="button" type="submit" value="Submit">
        <button type="reset" onClick='hideAddDiv()'>Cancel</button>

    </form>
    </div>

    {{!-- Hide div --}}
    <script>
        function hideAddDiv(){
            document.getElementById("addPassengersOnFlightsDiv").style = "display:none";}
    </script>



    {{!-- update form --}}
    {{!-- script and div for update form Source: https://stackoverflow.com/questions/59703565/fill-a-fields-in-forms-with-button-onclick --}}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
    function fillForm(flightUpdate, idPassengerUpdate, seatNumberUpdate){
        document.getElementById('updatePaxOnFltDiv').style = 'display:block';
        document.getElementById('flightUpdate').value = flightUpdate;
        document.getElementById('idPassengerUpdate').value = idPassengerUpdate;
        document.getElementById('seatNumberUpdate').value = seatNumberUpdate;
        document.getElementById('flightValue').value = flightUpdate;
        document.getElementById('idPassengerValue').value = idPassengerUpdate;
    };
    
    </script>

    {{!-- Hide div --}}
    <script>
        function hideDiv(){
            document.getElementById("updatePaxOnFltDiv").style = "display:none";}
    </script>


    {{!-- Update Form --}}
    <div id='updatePaxOnFltDiv' style='display:none'>
    <legend>Update Passenger On Flight</legend>
    <form id='update-PassengersOnFlights-form-ajax' action='/update-PassengersOnFlights-form-ajax' method='POST'>
        
        Flight: <select name="flightUpdate" id="flightUpdate">

            <option value="{{flightUpdate}}" selected hidden disabled>{{flightUpdate}}</option>
            {{#each flights}}
            <option value="{{this.flightNumber}}">{{this.flightNumber}}</option>
            {{/each}}
            </select>
        
        Passenger: <select name="idPassengerUpdate" id="idPassengerUpdate">
        <option value=""  disabled selected="">Select Passenger</option>
        {{#each passengers}}
        <option value="{{this.idPassenger}}">{{this.name}}</option>
        {{/each}}
            </select>
        
        <label for="seatNumberUpdate">Seat Number</label>
        <input type="text" id="seatNumberUpdate" name="seatNumberUpdate" value="">

        <button type="submit" value="Submit" onClick='hideDiv()'>Submit</button>
        <button type="reset" onClick='hideDiv()'>Cancel</button>
    
        {{!-- passing original value to update --}}
        <label for="flightValue"></label>
        <input type="hidden" id="flightValue" name="flightValue" value="">
        <label for="idPassengerValue"></label>
        <input type="hidden" id="idPassengerValue" name="idPassengerValue" value="">
    </form>
    </div>
    <script src='./js/update_passengersOnFlights.js'></script>
</body>